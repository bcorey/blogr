{% extends "base.html" %}
{% block title %}{{ tag }} - {{ site.blog.title }}{% endblock %}
{% block meta %}
<meta name="description" content="Posts exploring {{ tag }} on {{ site.blog.title }}" />
{% endblock %}
{% block content %}
<div class="markdown-preview-sizer markdown-preview-section">
    <div class="inline-title" contenteditable="false" spellcheck="false" tabindex="-1" enterkeyhint="done">
        #{{ tag }}
    </div>

    <div class="callout" data-callout="note">
        <div class="callout-title">
            <div class="callout-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" />
                    <line x1="7" y1="7" x2="7.01" y2="7" />
                </svg>
            </div>
            <div class="callout-title-inner">Tagged Posts</div>
        </div>
        <div class="callout-content">
            <p>All posts tagged with <span class="tag">#{{ tag }}</span></p>
        </div>
    </div>

    <div class="backlink-pane">

        <div class="search-result-container">
            {% for post in posts %}
            <article class="post-card">
                <div class="post-header">
                    <h3 class="post-title">
                        <a href="{{ url(path='posts/' ~ post.metadata.slug ~ '.html') | safe }}">{{ post.metadata.title
                            }}</a>
                    </h3>
                    <div class="post-meta">
                        <time class="post-date" datetime="{{ post.metadata.date }}">
                            {{ post.metadata.date | date(format="%B %d, %Y") }}
                        </time>
                        {% if post.metadata.author %}
                        <span class="post-author">by {{ post.metadata.author }}</span>
                        {% endif %}
                        {% if post.metadata.status == "draft" %}
                        <span class="draft-badge">Draft</span>
                        {% endif %}
                    </div>
                </div>

                {% if post.metadata.description %}
                <div class="post-excerpt">
                    <p>{{ post.metadata.description }}</p>
                </div>
                {% endif %}

                {% if post.metadata.tags %}
                <div class="post-tags">
                    {% for tag in post.metadata.tags %}
                    <a href="{{ url(path='tags/' ~ tag ~ '.html') | safe }}" class="tag">#{{ tag }}</a>
                    {% endfor %}
                </div>
                {% endif %}
            </article>
            {% endfor %}
        </div>
    </div>

    {% if posts | length == 0 %}
    <!-- No posts with this tag -->
    <div class="callout" data-callout="warning">
        <div class="callout-content">
            <p>
                No posts found with the tag <span class="tag">#{{ tag }}</span>.
            </p>
        </div>
    </div>
    {% endif %}

    <!-- Navigation callout -->
    <div class="callout" data-callout="tip">
        <div class="callout-content">
            <p>
                Browse all
                <a href="{{ url(path='tags/') }}" class="internal-link">tags</a>, view the
                <a href="{{ url(path='archive.html') }}" class="internal-link">archive</a>, or return to
                <a href="{{ url(path='') }}" class="internal-link">home</a>.
            </p>
        </div>
    </div>
</div>
{% endblock %}